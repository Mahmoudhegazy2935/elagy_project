<app-navebar-admin></app-navebar-admin>
<div class="d-flex justify-content-center mt-3">
  <div class="orders-container col-lg-8 col-md-10 col-sm-12">
    <div class="row justify-content-start align-items-center mb-3">
      <h3>Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h3>
    </div>

    <div class="mb-3">
      <label for="datePicker" class="form-label">Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
      <input id="datePicker" type="date" class="form-control"
             [(ngModel)]="selectedDate" (change)="filterOrdersByDate()">
    </div>

    <hr>

    @if (filteredOrders.length === 0) {
      <p class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®.</p>
    } @else {
      @for (order of filteredOrders; track $index) {
        <div class="card mb-4 shadow-sm rounded">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <div>
                <h4 class="card-title text-dark">Ø§Ù„Ø§Ø³Ù… : {{ order.userName }}</h4>
                <p class="mb-1">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ğŸ“ : <strong>{{ order.phoneNumber }}</strong></p>
                <p class="mb-1">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ğŸ  : {{ order.address }}</p>
              </div>
              <div>
                <p class="mb-1 w-75 text-center me-auto">{{ formatRelativeDate(order.date) }}</p>
                <p class="mb-1 w-75 text-center me-auto">{{ order.date | date: 'medium' }}</p>
              </div>
            </div>

            <div class="d-flex justify-content-end align-items-center">
              <p class="mb-0 status-tag">ğŸ“Œ Ø§Ù„Ø­Ø§Ù„Ø©: <strong>{{ order.status }}</strong></p>
            </div>

            @if (expandedOrderIds.includes(order.id)) {
              <ul class="items list-group list-group-flush mb-3">
                @for (item of order.items; track $index) {
                  <li class="items list-group-item d-flex justify-content-between align-items-center">
                    ğŸ§¾ {{ item.productName }}
                    <span>Ø§Ù„ÙƒÙ…ÙŠØ©: {{ item.quantity }} | Ø§Ù„Ø³Ø¹Ø±: {{ item.priceProduct }} Ø¬Ù†ÙŠÙ‡</span>
                  </li>
                }
              </ul>
            }

            <button class="btn btn-outline-dark dropdown-toggle" (click)="toggleOrderItems(order.id)">
              {{ expandedOrderIds.includes(order.id) ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª' : 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª' }}
            </button>
          </div>
        </div>
      }
    }
  </div>
</div>
